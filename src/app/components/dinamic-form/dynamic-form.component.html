<h2 mat-dialog-title>{{ form.formTitle }}</h2>
<form #myForm="ngForm" [formGroup]="dynamicFormGroup">
@for(control of form.formControls; track control.name) {
  <ng-container>

    @if(['text', 'email', 'password', 'number', 'date'].includes(control.type)) {
      <div [class]="control.class">
        <mat-form-field>
          <mat-label>{{ control.label }}</mat-label>
          <input matInput [type]="control.type" formControlName="{{ control.name }}">
          @if(dynamicFormGroup.get(control.name)?.invalid && dynamicFormGroup.get(control.name)?.touched) {
            <mat-error> {{ getValidationErros(control) }}</mat-error>
          }

        </mat-form-field>
      </div>
    }

    @if(control.type === 'select'){
      <div [class]="control.class">
        <mat-form-field>
          <mat-label>{{ control.label }}</mat-label>
          <mat-select formControlName="{{ control.name }}">
            @for( opt of control.options; track opt.id ) {
              <mat-option [value]="opt.value" selected>{{ opt.value }}</mat-option>
            }
          </mat-select>
          @if( dynamicFormGroup.get(control.name)?.invalid && dynamicFormGroup.get(control.name)?.touched || myForm.submitted ) {
            <mat-error> {{ getValidationErros(control) }}</mat-error>
          }
        </mat-form-field>
      </div>
    }

    @if( control.type === 'toggle' ) {
      <mat-slide-toggle [checked]="control.value" [className]="control.class" formControlName="{{ control.name }}">{{ control.label }}</mat-slide-toggle>
    }

    @if( control.type === 'checkbox' ) {
      <mat-checkbox [checked]="control.value" formControlName="{{ control.name }}"> {{ control.label }} </mat-checkbox>
    }

    @if( control.type === 'textarea' ) {
      <mat-form-field>
        <mat-label>{{ control.label }}</mat-label>
        <textarea matInput formControlName="{{ control.placeholder }}"></textarea>
      </mat-form-field>
    }
  </ng-container>
}

<div class="button-container">
  <button mat-raised-button color="primary" class="save-button" (click)="onsubmit()">{{ form.saveBtnTitle}}</button>
  <button mat-raised-button color="warn" class="cancel-button" (click)="onCancel()">{{ form.deleteBtnTitle}}</button>
</div>
</form>

